{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from 'axios';\n\nconst loader = document.querySelector('.loader');\nloader.style.display = 'none';\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet maxImages = 0;\n\nconst searchForm = document.getElementById('searchForm');\nconst searchInput = document.getElementById('searchInput');\nconst imageGallery = document.getElementById('imageGallery');\nconst loadMoreBtn = document.getElementById('loadMoreBtn');\n\nloadMoreBtn.style.display = 'none'; \n\n\nfunction getCardHeight() {\n    const card = document.querySelector('.card');\n    const cardRect = card.getBoundingClientRect();\n    return cardRect.height;\n}\n\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    const query = searchInput.value.trim();\n\n    if (query === \"\") {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search query.',\n            position:'topRight'\n        });\n        return;\n    }\n\n    loader.style.display = 'inline-block';\n    currentQuery = query;\n    currentPage = 1;\n\n    try {\n        const apiKey = '42374416-80395e50359da313800ed9b7e';\n        const response = await axios.get(`https://pixabay.com/api/?key=${apiKey}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${currentPage}&per_page=15`);\n        \n        loader.style.display = 'none';\n        const data = response.data;\n\n        maxImages = data.totalHits;\n\n        if (data.hits.length === 0) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again.',\n                position: 'topRight'\n            });\n        } else {\n            imageGallery.innerHTML = '';\n\n            data.hits.forEach(image => {\n                const card = document.createElement('div');\n                card.classList.add('card');\n\n                const link = document.createElement('a');\n                link.href = image.largeImageURL;\n                link.classList.add('gallery-link'); \n\n                const img = document.createElement('img');\n                img.src = image.webformatURL;\n                img.alt = image.tags;\n\n                const details = document.createElement('div');\n                details.classList.add('details');\n                details.innerHTML = `\n                    <p>Likes: ${image.likes}</p>\n                    <p>Views: ${image.views}</p>\n                    <p>Comments: ${image.comments}</p>\n                    <p>Downloads: ${image.downloads}</p>\n                `;\n\n                link.appendChild(img);\n                card.appendChild(link);\n                card.appendChild(details)\n\n                imageGallery.appendChild(card);\n            });\n\n            const lightbox = new SimpleLightbox('.gallery-link'); \n            lightbox.refresh();\n\n            if (imageGallery.childElementCount < maxImages) {\n                loadMoreBtn.style.display = 'block'; \n            }\n            window.scrollBy({\n                top: getCardHeight() * 2,\n                behavior: 'smooth'\n            });\n        }\n    } catch (error) {\n        console.log('Error fetching data:', error);\n        loader.style.display = 'none';\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while fetching data. Please try again later.',\n            position:'topRight'\n        });\n    }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    currentPage++;\n\n    loader.style.display = 'inline-block';\n\n    try {\n        const apiKey = '42374416-80395e50359da313800ed9b7e';\n        const response = await axios.get(`https://pixabay.com/api/?key=${apiKey}&q=${currentQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${currentPage}&per_page=15`);\n        \n        loader.style.display = 'none';\n        const data = response.data;\n\n        if (data.hits.length === 0) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no more images to load.',\n                position: 'topRight'\n            });\n            loadMoreBtn.style.display = 'none'; \n            return; \n        } else {\n            data.hits.forEach(image => {\n                const card = document.createElement('div');\n                card.classList.add('card');\n\n                const link = document.createElement('a');\n                link.href = image.largeImageURL;\n                link.classList.add('gallery-link'); \n\n                const img = document.createElement('img');\n                img.src = image.webformatURL;\n                img.alt = image.tags;\n\n                const details = document.createElement('div');\n                details.classList.add('details');\n                details.innerHTML = `\n                    <p>Likes: ${image.likes}</p>\n                    <p>Views: ${image.views}</p>\n                    <p>Comments: ${image.comments}</p>\n                    <p>Downloads: ${image.downloads}</p>\n                `;\n\n                link.appendChild(img);\n                card.appendChild(link);\n                card.appendChild(details)\n\n                imageGallery.appendChild(card);\n            });\n\n            const lightbox = new SimpleLightbox('.gallery-link'); \n            lightbox.refresh();\n\n            if (imageGallery.childElementCount < maxImages) {\n                loadMoreBtn.style.display = 'block';\n            } else {\n                loadMoreBtn.style.display = 'none';\n                iziToast.info({\n                    title: 'End of Search Results',\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position:'topRight'\n                });\n            }\n            window.scrollBy({\n                top: getCardHeight() * 2,\n                behavior: 'smooth'\n            });\n        }\n    } catch (error) {\n        console.log('Error fetching data:', error);\n        loader.style.display = 'none';\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while fetching data. Please try again later.',\n            position:'topRight'\n        });\n    }\n});\n"],"names":["loader","currentPage","currentQuery","maxImages","searchForm","searchInput","imageGallery","loadMoreBtn","getCardHeight","event","query","iziToast","apiKey","response","axios","data","image","card","link","img","details","SimpleLightbox","error"],"mappings":"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"}